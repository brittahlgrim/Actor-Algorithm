package pack1.ActorAlgorithm;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;

public class ActorAlgorithm {

	public static void main (String[] args) throws IOException, JAXBException {
	    System.out.println("hello world");
	    SearchResult actorSearchResult = searchActorByName("");
	    
	    String id = actorSearchResult.ID;
	    getActorById(id);
	}
	
	private static void getActorById(String id)
	{
		String uri ="http://imdb.wemakesites.net/api/search?q=nicolascage&api_key=81a3e6ca-56fc-40c4-aca0-fb228b7b76a9";

		URL url = new URL(uri);
		HttpURLConnection connection =
		    (HttpURLConnection) url.openConnection();
		connection.setRequestMethod("GET");
		connection.setRequestProperty("Accept", "application/xml");

		JAXBContext jc = JAXBContext.newInstance(FullSearchResult.class);
		InputStream xml = connection.getInputStream();
		FullSearchResult actorByIdResult =
		    (FullSearchResult) jc.createUnmarshaller().unmarshal(xml);
		
		SearchResult firstActorSearchResult = fullActorSearchResult.Data.Results.Names.iterator().next();
		
		connection.disconnect();
		
		return firstActorSearchResult;
	}
	
	private static SearchResult searchActorByName(String name) throws IOException, JAXBException
	{
		String uri ="http://imdb.wemakesites.net/api/search?q=nicolascage&api_key=81a3e6ca-56fc-40c4-aca0-fb228b7b76a9";

		URL url = new URL(uri);
		HttpURLConnection connection =
		    (HttpURLConnection) url.openConnection();
		connection.setRequestMethod("GET");
		connection.setRequestProperty("Accept", "application/xml");

		JAXBContext jc = JAXBContext.newInstance(FullSearchResult.class);
		InputStream xml = connection.getInputStream();
		FullSearchResult fullActorSearchResult =
		    (FullSearchResult) jc.createUnmarshaller().unmarshal(xml);
		
		SearchResult firstActorSearchResult = fullActorSearchResult.Data.Results.Names.iterator().next();
		
		connection.disconnect();
		
		return firstActorSearchResult;
	}
	
	
}
